"use client";
import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { ArrowLeft, BookOpen, AlertTriangle, Shield } from "lucide-react";
import Link from "next/link";
export default function RescueRunbookPage() {
    return (_jsxs("div", { className: "max-w-4xl mx-auto py-8 px-4", children: [_jsxs("div", { className: "mb-8", children: [_jsxs(Link, { href: "/ops", className: "inline-flex items-center text-sm text-gray-500 hover:text-gray-900 mb-4", children: [_jsx(ArrowLeft, { className: "h-4 w-4 mr-1" }), " Back to Dashboard"] }), _jsxs("div", { className: "flex items-center gap-3", children: [_jsx(BookOpen, { className: "h-8 w-8 text-indigo-600" }), _jsx("h1", { className: "text-3xl font-bold text-gray-900", children: "Vayva Rescue Runbook" })] }), _jsx("p", { className: "text-gray-500 mt-2 text-lg", children: "Standard Operating Procedures for AI-Assisted Incident Response" })] }), _jsx("div", { className: "prose prose-indigo max-w-none bg-white p-8 rounded-xl border border-gray-200 shadow-sm", children: _jsxs("div", { className: "space-y-8", children: [_jsxs(Section, { title: "1. Overview", children: [_jsxs("p", { children: ["The Vayva Rescue System is a specialized AI agent designed to diagnose and propose fixes for operational incidents. It operates in a ", _jsx("strong", { children: "Read-Only" }), " capacity by default and requires Human-in-the-Loop (HITL) approval for any write actions/mutations."] }), _jsxs("div", { className: "bg-blue-50 p-4 rounded-lg border border-blue-100 flex gap-3", children: [_jsx(Shield, { className: "h-5 w-5 text-blue-600 shrink-0" }), _jsxs("div", { className: "text-sm text-blue-800", children: [_jsx("strong", { children: "Core Principle:" }), " Do No Harm. The Rescue Agent prioritizes platform stability and data integrity over speed."] })] })] }), _jsx(Section, { title: "2. Triage Levels & Response", children: _jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4 not-prose", children: [_jsx(TriageCard, { level: "P0 - Critical", desc: "Platform Outage, Data Loss, Payment Failure", response: "Immediate. Wake on-call. Agent starts diagnostics.", color: "red" }), _jsx(TriageCard, { level: "P1 - High", desc: "Feature degradation, Stuck Jobs, High Latency", response: "Agent analyzes root cause. Staff notified within 30m.", color: "amber" }), _jsx(TriageCard, { level: "P2 - Medium", desc: "UX Glitches, Non-blocking errors", response: "Agent logs issue. Review during business hours.", color: "blue" })] }) }), _jsx(Section, { title: "3. Incident Workflow", children: _jsxs("ol", { className: "list-decimal pl-5 space-y-2", children: [_jsxs("li", { children: [_jsx("strong", { children: "Detection:" }), " Sentry/CloudWatch triggers an alert to ", _jsx("code", { children: "/api/webhooks/rescue" }), "."] }), _jsxs("li", { children: [_jsx("strong", { children: "Analysis:" }), " Rescue Agent (Groq) queries logs/metrics to identify root cause."] }), _jsxs("li", { children: [_jsx("strong", { children: "Proposal:" }), " Agent drafts a Remediation Plan (see Ops Console)."] }), _jsxs("li", { children: [_jsx("strong", { children: "Approval:" }), " On-call engineer invokes ", _jsx("code", { children: "/approve" }), " or manually executes fix."] }), _jsxs("li", { children: [_jsx("strong", { children: "Verification:" }), " Post-fix health check confirms stability."] })] }) }), _jsxs(Section, { title: "4. Kill Switch & Safety", children: [_jsx("p", { children: "If the Rescue Agent behaves unexpectedly or consumes excessive resources:" }), _jsxs("div", { className: "bg-red-50 p-4 rounded-lg border border-red-100 flex gap-3", children: [_jsx(AlertTriangle, { className: "h-5 w-5 text-red-600 shrink-0" }), _jsxs("div", { className: "text-sm text-red-800", children: [_jsx("strong", { children: "Emergency Stop:" }), " Set ", _jsx("code", { children: "RESCUE_AGENT_ENABLED=false" }), " in Vercel Env Vars. This immediately halts all agent activities."] })] })] })] }) })] }));
}
function Section({ title, children }) {
    return (_jsxs("section", { children: [_jsx("h2", { className: "text-xl font-bold text-gray-900 border-b border-gray-100 pb-2 mb-4", children: title }), _jsx("div", { className: "text-gray-600 leading-relaxed space-y-4", children: children })] }));
}
function TriageCard({ level, desc, response, color }) {
    const colors = {
        red: "bg-red-50 border-red-100 text-red-900",
        amber: "bg-amber-50 border-amber-100 text-amber-900",
        blue: "bg-blue-50 border-blue-100 text-blue-900",
    };
    return (_jsxs("div", { className: `p-4 rounded-lg border ${colors[color]}`, children: [_jsx("div", { className: "font-bold mb-1", children: level }), _jsx("div", { className: "text-sm opacity-90 mb-2", children: desc }), _jsxs("div", { className: "text-xs font-mono bg-white/50 p-2 rounded", children: ["RESPONSE: ", response] })] }));
}
