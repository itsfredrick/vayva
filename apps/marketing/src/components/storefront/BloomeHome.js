import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useState } from "react";
import { useStorefrontProducts, useStorefrontStore, } from "@/hooks/storefront/useStorefront";
import { useStorefrontCart } from "@/hooks/storefront/useStorefrontCart";
import { CheckoutModal } from "./CheckoutModal";
import { ShoppingBag, X } from "lucide-react";
import { Button } from "@vayva/ui";
export function BloomeHome({ storeName: initialStoreName, storeSlug, }) {
    const { store } = useStorefrontStore(storeSlug);
    const { products, isLoading } = useStorefrontProducts(storeSlug, {
        limit: 8,
    });
    // Split products for layout
    const newArrivals = products.slice(0, 4);
    const collection = products.slice(4, 8);
    const { cart, addToCart, removeFromCart, updateQuantity, total, isOpen: isCartOpen, setIsOpen: setIsCartOpen, clearCart, } = useStorefrontCart(storeSlug || "");
    const [isCheckoutOpen, setIsCheckoutOpen] = useState(false);
    const displayName = store?.name || initialStoreName;
    return (_jsxs("div", { className: "bg-[#FAFAF9] min-h-screen text-[#44403C] font-serif", children: [_jsx(CheckoutModal, { isOpen: isCheckoutOpen, onClose: () => setIsCheckoutOpen(false), cart: cart, total: total, storeSlug: storeSlug || "", onSuccess: clearCart }), _jsxs("nav", { className: "flex items-center justify-between px-8 py-6 sticky top-0 bg-[#FAFAF9]/90 backdrop-blur z-50 border-b border-[#E7E5E4]", children: [_jsxs("div", { className: "text-sm font-sans tracking-widest uppercase flex gap-6", children: [_jsx("a", { href: "#", className: "hover:text-black transition-colors", children: "Shop" }), _jsx("a", { href: "#", className: "hover:text-black transition-colors", children: "About" }), _jsx("a", { href: "#", className: "hover:text-black transition-colors", children: "Journal" })] }), _jsx("div", { className: "text-3xl font-bold tracking-tight text-[#292524]", children: displayName }), _jsxs("div", { className: "flex gap-4 items-center", children: [_jsx(Button, { variant: "ghost", className: "text-sm font-sans tracking-widest uppercase hover:text-black h-auto p-0 hover:bg-transparent", children: "Account" }), _jsxs(Button, { variant: "ghost", className: "text-sm font-sans tracking-widest uppercase hover:text-black flex items-center gap-2 h-auto p-0 hover:bg-transparent", onClick: () => setIsCartOpen(true), "aria-label": `View cart with ${cart.length} items`, children: ["Cart (", cart.length, ")"] })] })] }), isCartOpen && (_jsxs("div", { className: "fixed inset-0 z-50 flex justify-end font-sans", children: [_jsx("div", { className: "absolute inset-0 bg-[#292524]/20 backdrop-blur-sm transition-opacity", onClick: () => setIsCartOpen(false) }), _jsxs("div", { className: "relative w-full max-w-md bg-[#FAFAF9] h-full p-8 flex flex-col shadow-2xl animate-in slide-in-from-right duration-500", children: [_jsxs("div", { className: "flex justify-between items-center mb-8", children: [_jsx("h2", { className: "text-2xl font-serif text-[#292524]", children: "Your Cart" }), _jsx(Button, { variant: "ghost", size: "icon", onClick: () => setIsCartOpen(false), className: "opacity-50 hover:opacity-100 transition-opacity p-0 h-auto", "aria-label": "Close cart sidebar", children: _jsx(X, { className: "w-6 h-6" }) })] }), _jsx("div", { className: "flex-1 overflow-auto space-y-8 pr-2", children: cart.length === 0 ? (_jsxs("div", { className: "text-center py-20 text-[#A8A29E]", children: [_jsx("p", { className: "mb-4", children: "Your cart is currently empty." }), _jsx(Button, { variant: "link", onClick: () => setIsCartOpen(false), className: "text-[#292524] underline underline-offset-4 p-0 h-auto", children: "Continue Browsing" })] })) : (cart.map((item) => (_jsxs("div", { className: "flex gap-6", children: [_jsx("div", { className: "w-24 h-32 bg-[#E7E5E4] flex-shrink-0", children: item.image && (_jsx("img", { src: item.image, alt: item.name, className: "w-full h-full object-cover mix-blend-multiply" })) }), _jsxs("div", { className: "flex-1 flex flex-col justify-between py-1", children: [_jsxs("div", { children: [_jsx("h3", { className: "font-serif text-lg text-[#292524] leading-snug", children: item.name }), _jsxs("p", { className: "text-sm text-[#78716C] mt-1", children: ["QTY: ", item.quantity] })] }), _jsxs("div", { className: "flex justify-between items-end", children: [_jsx(Button, { variant: "link", onClick: () => removeFromCart(item.id), className: "text-xs text-[#A8A29E] hover:text-[#78716C] underline underline-offset-2 p-0 h-auto", children: "Remove" }), _jsxs("span", { className: "font-serif text-lg", children: ["\u20A6", (item.price * item.quantity).toLocaleString()] })] })] })] }, item.id)))) }), cart.length > 0 && (_jsxs("div", { className: "border-t border-[#E7E5E4] pt-6 mt-6", children: [_jsxs("div", { className: "flex justify-between items-center mb-6 text-[#292524]", children: [_jsx("span", { className: "text-sm uppercase tracking-widest", children: "Subtotal" }), _jsxs("span", { className: "font-serif text-2xl", children: ["\u20A6", total.toLocaleString()] })] }), _jsx(Button, { onClick: () => {
                                            setIsCartOpen(false);
                                            setIsCheckoutOpen(true);
                                        }, className: "w-full bg-[#292524] text-[#FAFAF9] py-6 h-auto text-sm font-bold uppercase tracking-widest hover:bg-[#1C1917] transition-colors rounded-none", children: "Proceed to Checkout" })] }))] })] })), _jsxs("header", { className: "relative py-24 px-8 text-center max-w-4xl mx-auto", children: [_jsx("span", { className: "text-xs font-sans font-bold tracking-[0.2em] text-[#A8A29E] uppercase block mb-6", children: "Est. 2024" }), _jsxs("h1", { className: "text-6xl md:text-8xl mb-8 leading-none tracking-tight text-[#292524]", children: ["Objects for ", _jsx("br", {}), " ", _jsx("i", { className: "font-serif font-light text-[#78716C]", children: "Mindful Living" })] }), _jsx("p", { className: "text-lg text-[#78716C] leading-relaxed max-w-xl mx-auto mb-10", children: "Curated essentials designed to bring calm, balance, and beauty to your everyday rituals." }), _jsx("div", { className: "aspect-[16/9] bg-[#E7E5E4] w-full overflow-hidden", children: _jsx("img", { src: "https://images.unsplash.com/photo-1616486338812-3dadae4b4ace?auto=format&fit=crop&q=80&w=2000", alt: "Mindful Living Interior", className: "w-full h-full object-cover opacity-90 hover:scale-105 transition-transform duration-[2s]" }) })] }), _jsxs("section", { className: "px-8 py-20 max-w-7xl mx-auto", children: [_jsxs("div", { className: "flex justify-between items-baseline mb-12 border-b border-[#E7E5E4] pb-6", children: [_jsx("h2", { className: "text-3xl text-[#292524]", children: "New Arrivals" }), _jsx("a", { href: "#", className: "font-sans text-xs font-bold uppercase tracking-widest hover:underline decoration-[#A8A29E] underline-offset-4", children: "View All" })] }), isLoading && newArrivals.length === 0 ? (_jsx("div", { className: "text-center py-20 text-[#A8A29E]", children: "Loading objects..." })) : newArrivals.length === 0 ? (_jsx("div", { className: "text-center py-20 bg-[#F5F5F4]", children: _jsx("p", { className: "text-[#A8A29E]", children: "No products found." }) })) : (_jsx("div", { className: "grid md:grid-cols-4 gap-x-8 gap-y-12", children: newArrivals.map((product) => (_jsxs("div", { className: "group cursor-pointer", children: [_jsxs("div", { className: "aspect-[4/5] bg-[#F5F5F4] mb-6 overflow-hidden relative", children: [_jsx("img", { src: product.image ||
                                                `https://via.placeholder.com/400x500?text=${encodeURIComponent(product.name)}`, alt: product.name, className: "w-full h-full object-cover mix-blend-multiply opacity-90 group-hover:opacity-100 group-hover:scale-105 transition-all duration-700" }), _jsx(Button, { variant: "ghost", size: "icon", onClick: (e) => {
                                                e.stopPropagation();
                                                addToCart(product);
                                            }, className: "absolute bottom-4 right-4 bg-white p-3 rounded-full shadow-sm hover:shadow-md opacity-0 group-hover:opacity-100 transition-all duration-300 translate-y-4 group-hover:translate-y-0 h-10 w-10 flex items-center justify-center", "aria-label": `Add ${product.name} to cart`, children: _jsx(ShoppingBag, { className: "w-4 h-4 text-[#292524]" }) })] }), _jsx("h3", { className: "text-lg text-[#292524] mb-1 group-hover:underline underline-offset-4 decoration-[#D6D3D1] transition-all", children: product.name }), _jsxs("div", { className: "flex justify-between items-baseline", children: [_jsx("p", { className: "text-sm text-[#A8A29E] font-sans truncate pr-4", children: product.description }), _jsxs("span", { className: "text-[#57534E] font-medium", children: ["\u20A6", product.price.toLocaleString()] })] })] }, product.id))) }))] }), _jsx("footer", { className: "bg-[#292524] text-[#A8A29E] py-20 px-8 mt-20", children: _jsxs("div", { className: "max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center gap-8", children: [_jsx("div", { className: "text-2xl font-bold text-[#FAFAF9]", children: displayName }), _jsxs("div", { className: "font-sans text-xs tracking-widest uppercase flex gap-8", children: [_jsx("a", { href: "#", className: "hover:text-white transition-colors", children: "Shipping" }), _jsx("a", { href: "#", className: "hover:text-white transition-colors", children: "Returns" }), _jsx("a", { href: "#", className: "hover:text-white transition-colors", children: "Terms" }), _jsx("a", { href: "#", className: "hover:text-white transition-colors", children: "Privacy" })] }), _jsx("div", { className: "font-serif italic text-sm", children: "\u00A9 2024 Vayva Commerce." })] }) })] }));
}
