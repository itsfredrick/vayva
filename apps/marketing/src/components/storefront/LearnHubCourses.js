import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useState } from "react";
import { useStorefrontProducts, useStorefrontStore, } from "@/hooks/storefront/useStorefront";
import { useStorefrontCart } from "@/hooks/storefront/useStorefrontCart";
import { CheckoutModal } from "./CheckoutModal";
import { ShoppingBag, X, Star, Globe, CheckCircle } from "lucide-react";
import { Button } from "@vayva/ui";
export function LearnHubCourses({ storeName: initialStoreName, storeSlug, }) {
    const { store } = useStorefrontStore(storeSlug);
    const { products, isLoading } = useStorefrontProducts(storeSlug, {
        limit: 12,
    });
    const { cart, addToCart, removeFromCart, updateQuantity, total, isOpen: isCartOpen, setIsOpen: setIsCartOpen, clearCart, } = useStorefrontCart(storeSlug || "");
    const [isCheckoutOpen, setIsCheckoutOpen] = useState(false);
    const displayName = store?.name || initialStoreName;
    return (_jsxs("div", { className: "bg-[#f8f9fa] min-h-screen font-sans text-[#333]", children: [_jsx(CheckoutModal, { isOpen: isCheckoutOpen, onClose: () => setIsCheckoutOpen(false), cart: cart, total: total, storeSlug: storeSlug || "", onSuccess: clearCart }), _jsx("nav", { className: "bg-blue-600 text-white sticky top-0 z-50 shadow-lg", children: _jsxs("div", { className: "max-w-7xl mx-auto px-6 h-16 flex items-center justify-between", children: [_jsxs("div", { className: "font-bold text-xl tracking-tight flex items-center gap-2", children: [_jsx(Globe, { className: "w-6 h-6" }), displayName] }), _jsxs("div", { className: "flex items-center gap-6 text-sm font-medium", children: [_jsx("a", { href: "#", className: "opacity-90 hover:opacity-100", children: "Degrees" }), _jsx("a", { href: "#", className: "opacity-90 hover:opacity-100", children: "Certificates" }), _jsx("a", { href: "#", className: "opacity-90 hover:opacity-100", children: "For Business" })] }), _jsxs("div", { className: "flex items-center gap-4", children: [_jsx(Button, { variant: "ghost", className: "text-sm font-bold opacity-90 hover:opacity-100 text-white h-auto p-0 hover:bg-transparent", children: "Log In" }), _jsxs(Button, { variant: "primary", className: "bg-white text-blue-600 px-4 py-2 rounded font-bold text-sm hover:bg-blue-50 transition-colors flex items-center gap-2 h-auto", onClick: () => setIsCartOpen(true), "aria-label": `View cart with ${cart.length} items`, children: [_jsx(ShoppingBag, { className: "w-4 h-4" }), cart.length > 0 && _jsxs("span", { children: ["(", cart.length, ")"] })] })] })] }) }), isCartOpen && (_jsxs("div", { className: "fixed inset-0 z-50 flex justify-end", children: [_jsx("div", { className: "absolute inset-0 bg-blue-900/30 backdrop-blur-sm", onClick: () => setIsCartOpen(false) }), _jsxs("div", { className: "relative w-full max-w-md bg-white h-full shadow-2xl flex flex-col animate-in slide-in-from-right", children: [_jsxs("div", { className: "p-6 border-b border-gray-100 flex justify-between items-center", children: [_jsx("h2", { className: "font-bold text-xl text-blue-900", children: "Your Learning Plan" }), _jsx(Button, { variant: "ghost", size: "icon", onClick: () => setIsCartOpen(false), "aria-label": "Close cart sidebar", children: _jsx(X, { className: "w-5 h-5 text-gray-400" }) })] }), _jsx("div", { className: "flex-1 overflow-auto p-6 space-y-6", children: cart.length === 0 ? (_jsx("div", { className: "text-center py-10 opacity-60", children: _jsx("p", { className: "text-gray-400", children: "Cart is empty." }) })) : (cart.map((item) => (_jsxs("div", { className: "bg-white border border-gray-100 rounded-lg p-4 shadow-sm", children: [_jsxs("div", { className: "flex justify-between items-start mb-2", children: [_jsx("h3", { className: "font-bold text-gray-800 text-sm", children: item.name }), _jsxs("span", { className: "font-bold text-blue-600", children: ["\u20A6", (item.price * item.quantity).toLocaleString()] })] }), _jsxs("div", { className: "text-xs text-green-600 font-bold flex items-center gap-1 mb-4", children: [_jsx(CheckCircle, { className: "w-3 h-3" }), " Includes Certificate"] }), _jsx(Button, { variant: "link", onClick: () => removeFromCart(item.id), className: "text-xs text-red-500 font-medium hover:underline p-0 h-auto", children: "Remove" })] }, item.id)))) }), cart.length > 0 && (_jsxs("div", { className: "p-6 border-t border-gray-100 bg-gray-50", children: [_jsxs("div", { className: "flex justify-between text-lg font-bold mb-4", children: [_jsx("span", { children: "Total:" }), _jsxs("span", { children: ["\u20A6", total.toLocaleString()] })] }), _jsx(Button, { onClick: () => {
                                            setIsCartOpen(false);
                                            setIsCheckoutOpen(true);
                                        }, className: "w-full bg-blue-600 text-white py-6 h-auto font-bold rounded shadow-lg hover:bg-blue-700 transition-colors", children: "Proceed to Payment" })] }))] })] })), _jsx("div", { className: "bg-white border-b border-gray-200", children: _jsx("div", { className: "max-w-7xl mx-auto px-6 py-20 flex items-center", children: _jsxs("div", { className: "max-w-2xl", children: [_jsx("h1", { className: "text-5xl md:text-6xl font-bold mb-6 text-[#1f1f1f] tracking-tight", children: "Learn without limits" }), _jsx("p", { className: "text-xl text-gray-600 mb-8 max-w-lg", children: "Build skills with courses, certificates, and degrees online from world-class universities and companies." }), _jsxs("div", { className: "flex gap-4", children: [_jsx(Button, { className: "bg-blue-600 text-white px-8 py-6 font-bold rounded text-lg shadow-blue-200 shadow-xl hover:bg-blue-700 transition-colors h-auto", children: "Start Learning Free" }), _jsx(Button, { variant: "outline", className: "border border-blue-600 text-blue-600 px-8 py-6 font-bold rounded text-lg hover:bg-blue-50 transition-colors h-auto bg-transparent", children: "Career Guide" })] })] }) }) }), _jsx("div", { className: "bg-gray-100 border-b border-gray-200 py-12", children: _jsxs("div", { className: "max-w-7xl mx-auto px-6 flex justify-around text-center", children: [_jsxs("div", { children: [_jsx("div", { className: "text-3xl font-bold text-blue-600 mb-1", children: "82%" }), _jsx("div", { className: "text-xs font-bold text-gray-500 uppercase tracking-widest", children: "Report Career Benefits" })] }), _jsxs("div", { children: [_jsx("div", { className: "text-3xl font-bold text-blue-600 mb-1", children: "100+" }), _jsx("div", { className: "text-xs font-bold text-gray-500 uppercase tracking-widest", children: "Global Partners" })] }), _jsxs("div", { children: [_jsx("div", { className: "text-3xl font-bold text-blue-600 mb-1", children: "24/7" }), _jsx("div", { className: "text-xs font-bold text-gray-500 uppercase tracking-widest", children: "Online Support" })] })] }) }), _jsxs("div", { className: "max-w-7xl mx-auto px-6 py-16", children: [_jsx("h2", { className: "text-2xl font-bold mb-8 text-[#1f1f1f]", children: "Most Popular Certificates" }), isLoading && products.length === 0 ? (_jsx("div", { className: "text-center py-20 text-gray-500", children: "Loading courses..." })) : products.length === 0 ? (_jsx("div", { className: "text-center py-20 border border-gray-200 rounded-lg", children: _jsx("p", { className: "text-gray-400", children: "No courses found." }) })) : (_jsx("div", { className: "grid md:grid-cols-4 gap-6", children: products.map((course) => (_jsxs("div", { className: "bg-white shadow-sm border border-gray-200 rounded-xl overflow-hidden hover:shadow-xl transition-all h-full flex flex-col group cursor-pointer", onClick: () => addToCart(course), children: [_jsxs("div", { className: "h-40 bg-gray-200 relative", children: [_jsx("img", { src: course.image ||
                                                `https://via.placeholder.com/300x200?text=${encodeURIComponent(course.name)}`, alt: course.name, className: "w-full h-full object-cover" }), _jsx("div", { className: "absolute top-2 left-2 bg-white px-2 py-1 text-[10px] font-bold uppercase tracking-widest rounded shadow-sm", children: "Professional Cert" })] }), _jsxs("div", { className: "p-6 flex-1 flex flex-col", children: [_jsxs("div", { className: "flex items-center gap-2 mb-3", children: [_jsx("div", { className: "w-6 h-6 bg-gray-100 rounded-full" }), _jsx("span", { className: "text-xs font-bold text-gray-500", children: "IBM" })] }), _jsx("h3", { className: "font-bold text-lg text-gray-900 mb-2 line-clamp-2", children: course.name }), _jsxs("div", { className: "flex items-center gap-1 text-sm font-bold text-yellow-500 mb-4", children: ["4.7 ", _jsx(Star, { className: "w-4 h-4 fill-current" }), _jsx("span", { className: "text-gray-400 font-normal ml-1 text-xs", children: "(45k reviews)" })] }), _jsx("p", { className: "text-xs text-gray-500 mb-6 line-clamp-2", children: course.description }), _jsxs("div", { className: "mt-auto pt-4 border-t border-gray-100 flex items-center justify-between", children: [_jsxs("div", { className: "font-bold text-lg text-blue-700", children: ["\u20A6", course.price.toLocaleString()] }), _jsx(Button, { variant: "link", className: "text-blue-600 text-sm font-bold opacity-0 group-hover:opacity-100 transition-opacity p-0 h-auto", children: "Enroll Now \u2192" })] })] })] }, course.id))) }))] }), _jsxs("footer", { className: "bg-white border-t border-gray-200 mt-20 py-12 text-center text-gray-500 text-sm", children: ["\u00A9 2024 ", displayName, " Inc. All rights reserved."] })] }));
}
