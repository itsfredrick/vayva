import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useState, useMemo } from "react";
import { useStorefrontProducts, useStorefrontStore, } from "@/hooks/storefront/useStorefront";
import { useStorefrontCart } from "@/hooks/storefront/useStorefrontCart";
import { CheckoutModal } from "./CheckoutModal";
import { ShoppingBag, Star, Clock, MapPin, X, Plus, Minus } from "lucide-react";
import { Button } from "@vayva/ui";
export function GourmetDiningFood({ storeName: initialStoreName, storeSlug, }) {
    const { store } = useStorefrontStore(storeSlug);
    const { products, isLoading } = useStorefrontProducts(storeSlug, {
        limit: 50,
    });
    // Group by category (Starters, Mains, Desserts etc.)
    const menuSections = useMemo(() => {
        const sections = {};
        products.forEach((p) => {
            const cat = p.category || "Mains";
            if (!sections[cat])
                sections[cat] = [];
            sections[cat].push(p);
        });
        return sections;
    }, [products]);
    // Cart Hooks
    const { cart, addToCart, removeFromCart, updateQuantity, total, isOpen: isCartOpen, setIsOpen: setIsCartOpen, clearCart, } = useStorefrontCart(storeSlug || "");
    const [isCheckoutOpen, setIsCheckoutOpen] = useState(false);
    const displayName = store?.name || initialStoreName;
    return (_jsxs("div", { className: "bg-[#1c1c1c] min-h-screen text-[#e5e5e5] font-serif", children: [_jsx(CheckoutModal, { isOpen: isCheckoutOpen, onClose: () => setIsCheckoutOpen(false), cart: cart, total: total, storeSlug: storeSlug || "", onSuccess: clearCart }), _jsxs("nav", { className: "absolute top-0 w-full z-50 flex justify-between items-center px-8 md:px-16 py-8", children: [_jsx("div", { className: "text-2xl font-bold tracking-widest uppercase", children: displayName }), _jsxs("div", { className: "hidden md:flex gap-8 text-xs font-sans tracking-[0.2em] uppercase text-gray-400", children: [_jsx("a", { href: "#menu", className: "hover:text-white transition-colors", children: "Menu" }), _jsx("a", { href: "#reservations", className: "hover:text-white transition-colors", children: "Reservations" }), _jsx("a", { href: "#about", className: "hover:text-white transition-colors", children: "Our Story" })] }), _jsxs("div", { className: "flex gap-6", children: [_jsx(Button, { className: "text-xs font-sans tracking-[0.2em] uppercase border border-gold px-6 py-2 hover:bg-[#d4af37] hover:text-black transition-colors rounded-none h-auto border-white/20", onClick: () => document
                                    .getElementById("reservations")
                                    ?.scrollIntoView({ behavior: "smooth" }), "aria-label": "Book a table", children: "Book Table" }), _jsxs(Button, { variant: "ghost", size: "icon", className: "relative p-2 h-auto", onClick: () => setIsCartOpen(true), "aria-label": `View order bag with ${cart.length} items`, children: [_jsx(ShoppingBag, { className: "w-5 h-5 text-[#d4af37]" }), cart.length > 0 && (_jsx("span", { className: "absolute top-0 right-0 w-2 h-2 bg-red-500 rounded-full" }))] })] })] }), isCartOpen && (_jsxs("div", { className: "fixed inset-0 z-50 flex justify-end font-sans text-gray-900", children: [_jsx("div", { className: "absolute inset-0 bg-black/80 backdrop-blur-sm", onClick: () => setIsCartOpen(false) }), _jsxs("div", { className: "relative w-full max-w-md bg-white h-full p-8 flex flex-col animate-in slide-in-from-right duration-500", children: [_jsxs("div", { className: "flex justify-between items-center mb-8", children: [_jsx("h2", { className: "text-2xl font-serif text-black", children: "Your Order" }), _jsx(Button, { variant: "ghost", size: "icon", onClick: () => setIsCartOpen(false), "aria-label": "Close order bag", className: "h-auto", children: _jsx(X, { className: "w-6 h-6 text-gray-400" }) })] }), _jsx("div", { className: "flex-1 overflow-auto space-y-6 pr-2", children: cart.length === 0 ? (_jsx("div", { className: "text-center py-20 text-gray-400", children: "Your order is empty." })) : (cart.map((item) => (_jsx("div", { className: "flex gap-4", children: _jsxs("div", { className: "flex-1", children: [_jsxs("div", { className: "flex justify-between font-bold mb-1", children: [_jsx("span", { children: item.name }), _jsxs("span", { children: ["\u20A6", (item.price * item.quantity).toLocaleString()] })] }), _jsxs("div", { className: "flex items-center gap-4 mt-2", children: [_jsxs("div", { className: "flex items-center border border-gray-200 rounded-full px-2", children: [_jsx(Button, { variant: "ghost", size: "icon", onClick: () => updateQuantity(item.id, -1), disabled: item.quantity <= 1, className: "h-7 w-7 hover:text-orange-500 disabled:opacity-30 rounded-full p-0 h-auto", "aria-label": "Decrease quantity", children: _jsx(Minus, { className: "w-3 h-3" }) }), _jsx("span", { className: "px-3 text-sm", children: item.quantity }), _jsx(Button, { variant: "ghost", size: "icon", onClick: () => updateQuantity(item.id, 1), className: "h-7 w-7 hover:text-orange-500 rounded-full p-0 h-auto", "aria-label": "Increase quantity", children: _jsx(Plus, { className: "w-3 h-3" }) })] }), _jsx(Button, { variant: "link", onClick: () => removeFromCart(item.id), className: "text-xs text-red-500 hover:text-red-700 p-0 h-auto h-auto", "aria-label": `Remove ${item.name} from order`, children: "Remove" })] })] }) }, item.id)))) }), cart.length > 0 && (_jsxs("div", { className: "pt-6 border-t border-gray-100", children: [_jsxs("div", { className: "flex justify-between text-xl font-serif font-bold mb-6", children: [_jsx("span", { children: "Total" }), _jsxs("span", { children: ["\u20A6", total.toLocaleString()] })] }), _jsx(Button, { onClick: () => {
                                            setIsCartOpen(false);
                                            setIsCheckoutOpen(true);
                                        }, className: "w-full bg-[#1c1c1c] text-[#d4af37] py-6 h-auto text-xs font-bold uppercase tracking-[0.2em] hover:bg-black transition-colors rounded-none", "aria-label": "Complete order", children: "Complete Order" })] }))] })] })), _jsxs("header", { className: "relative h-screen flex items-center justify-center", children: [_jsxs("div", { className: "absolute inset-0", children: [_jsx("img", { src: "https://images.unsplash.com/photo-1544025162-d76690b67f61?auto=format&fit=crop&q=80&w=2000", alt: "Fine dining experience", className: "w-full h-full object-cover opacity-40" }), _jsx("div", { className: "absolute inset-0 bg-gradient-to-t from-[#1c1c1c] via-transparent to-transparent" })] }), _jsxs("div", { className: "relative z-10 text-center px-4", children: [_jsx("div", { className: "text-[#d4af37] text-sm md:text-base font-sans tracking-[0.3em] uppercase mb-6 animate-fade-in", children: "Fine Dining Experience" }), _jsx("h1", { className: "text-5xl md:text-8xl font-bold mb-8 tracking-tight", children: displayName }), _jsx("p", { className: "max-w-xl mx-auto text-gray-400 mb-12 font-sans font-light leading-relaxed", children: "A culinary journey through contemporary flavors and traditional techniques." }), _jsx(Button, { variant: "outline", onClick: () => document
                                    .getElementById("menu")
                                    ?.scrollIntoView({ behavior: "smooth" }), className: "border border-white/20 px-8 py-6 h-auto text-xs font-sans font-bold tracking-[0.2em] uppercase hover:border-[#d4af37] hover:text-[#d4af37] transition-all bg-transparent rounded-none", "aria-label": "View seasonal menu", children: "View Menu" })] })] }), _jsx("div", { className: "bg-[#161616] border-y border-white/5 py-12", children: _jsxs("div", { className: "max-w-6xl mx-auto px-4 grid md:grid-cols-3 gap-8 text-center font-sans", children: [_jsxs("div", { className: "flex flex-col items-center", children: [_jsx("div", { className: "text-[#d4af37] mb-4", children: _jsx(Clock, { className: "w-6 h-6" }) }), _jsx("h3", { className: "text-sm font-bold uppercase tracking-widest mb-2", children: "Opening Hours" }), _jsx("p", { className: "text-gray-500 text-sm", children: "Mon-Sun: 17:00 - 23:00" })] }), _jsxs("div", { className: "flex flex-col items-center", children: [_jsx("div", { className: "text-[#d4af37] mb-4", children: _jsx(MapPin, { className: "w-6 h-6" }) }), _jsx("h3", { className: "text-sm font-bold uppercase tracking-widest mb-2", children: "Location" }), _jsx("p", { className: "text-gray-500 text-sm", children: "Victoria Island, Lagos" })] }), _jsxs("div", { className: "flex flex-col items-center", children: [_jsx("div", { className: "text-[#d4af37] mb-4", children: _jsx(Star, { className: "w-6 h-6" }) }), _jsx("h3", { className: "text-sm font-bold uppercase tracking-widest mb-2", children: "Michelin Guide" }), _jsx("p", { className: "text-gray-500 text-sm", children: "2024 Selection" })] })] }) }), _jsxs("section", { id: "menu", className: "py-24 max-w-5xl mx-auto px-8", children: [_jsxs("div", { className: "text-center mb-20", children: [_jsx("span", { className: "text-[#d4af37] font-sans text-xs tracking-[0.2em] uppercase block mb-4", children: "Our Selection" }), _jsx("h2", { className: "text-4xl md:text-5xl font-bold", children: "Seasonal Menu" })] }), isLoading && products.length === 0 ? (_jsx("div", { className: "text-center text-gray-500 py-12", children: "Preparing menu..." })) : (_jsx("div", { className: "space-y-20", children: Object.entries(menuSections).map(([category, items]) => (_jsxs("div", { children: [_jsx("h3", { className: "text-3xl font-serif text-[#d4af37] mb-8 border-b border-white/10 pb-4 inline-block pr-12", children: category }), _jsx("div", { className: "grid md:grid-cols-2 gap-x-16 gap-y-12", children: items.map((dish) => (_jsxs("div", { className: "group cursor-pointer", children: [_jsxs("div", { className: "flex justify-between items-baseline mb-2", children: [_jsx("h4", { className: "text-xl font-bold group-hover:text-[#d4af37] transition-colors", children: dish.name }), _jsx("div", { className: "flex-1 mx-4 border-b border-white/10 border-dotted h-1" }), _jsxs("span", { className: "text-lg font-mono text-[#d4af37]", children: ["\u20A6", dish.price.toLocaleString()] })] }), _jsx("p", { className: "text-gray-500 text-sm italic mb-3", children: dish.description }), _jsx(Button, { variant: "link", onClick: () => addToCart(dish), className: "text-[10px] font-sans font-bold uppercase tracking-widest text-[#d4af37] hover:text-white transition-colors opacity-0 group-hover:opacity-100 p-0 h-auto", "aria-label": `Add ${dish.name} to order`, children: "+ Add to Order" })] }, dish.id))) })] }, category))) }))] }), _jsx("section", { id: "reservations", className: "py-24 bg-[#161616] mt-24", children: _jsxs("div", { className: "max-w-4xl mx-auto px-6 text-center", children: [_jsx("h2", { className: "text-4xl font-bold mb-6", children: "Reservations" }), _jsx("p", { className: "text-gray-400 mb-10 max-w-xl mx-auto", children: "Book your table for an unforgettable evening. For private events, please contact us directly." }), _jsxs("div", { className: "flex flex-col md:flex-row gap-4 justify-center", children: [_jsx("input", { type: "date", "aria-label": "Reservation date", className: "bg-[#1c1c1c] border border-white/10 text-white px-6 py-4 rounded-none focus:border-[#d4af37] outline-none" }), _jsxs("select", { "aria-label": "Number of guests", className: "bg-[#1c1c1c] border border-white/10 text-white px-6 py-4 rounded-none focus:border-[#d4af37] outline-none", children: [_jsx("option", { children: "2 Guests" }), _jsx("option", { children: "4 Guests" }), _jsx("option", { children: "6+ Guests" })] }), _jsx(Button, { className: "bg-[#d4af37] text-black px-10 py-6 h-auto font-bold font-sans tracking-widest uppercase hover:bg-white transition-colors rounded-none", "aria-label": "Find a table for reservation", children: "Find Table" })] })] }) }), _jsx("footer", { className: "py-12 text-center text-gray-600 text-xs font-sans tracking-widest uppercase", children: _jsxs("p", { children: ["\u00A9 2024 ", displayName, "."] }) })] }));
}
