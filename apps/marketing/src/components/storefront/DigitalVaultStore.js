import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useState } from "react";
import { useStorefrontProducts, useStorefrontStore, } from "@/hooks/storefront/useStorefront";
import { useStorefrontCart } from "@/hooks/storefront/useStorefrontCart";
import { CheckoutModal } from "./CheckoutModal";
import { ShoppingCart, X, Download, ShieldCheck } from "lucide-react";
import { Button } from "@vayva/ui";
export function DigitalVaultStore({ storeName: initialStoreName, storeSlug, }) {
    const { store } = useStorefrontStore(storeSlug);
    const { products, isLoading } = useStorefrontProducts(storeSlug, {
        limit: 12,
    });
    const { cart, addToCart, removeFromCart, updateQuantity, total, isOpen: isCartOpen, setIsOpen: setIsCartOpen, clearCart, } = useStorefrontCart(storeSlug || "");
    const [isCheckoutOpen, setIsCheckoutOpen] = useState(false);
    const displayName = store?.name || initialStoreName;
    return (_jsxs("div", { className: "bg-[#fff] min-h-screen font-sans text-[#24292e]", children: [_jsx(CheckoutModal, { isOpen: isCheckoutOpen, onClose: () => setIsCheckoutOpen(false), cart: cart, total: total, storeSlug: storeSlug || "", onSuccess: clearCart }), _jsx("header", { className: "border-b border-gray-100 py-6 px-6 sticky top-0 bg-white/90 backdrop-blur z-50", children: _jsxs("div", { className: "max-w-5xl mx-auto flex items-center justify-between", children: [_jsxs("div", { className: "flex items-center gap-3", children: [_jsx("div", { className: "w-10 h-10 bg-[#FF90E8] border-2 border-black rounded-full flex items-center justify-center font-bold text-xl shadow-[4px_4px_0px_0px_rgba(0,0,0,1)]", children: "DV" }), _jsx("span", { className: "font-bold text-xl tracking-tight", children: displayName })] }), _jsxs(Button, { variant: "primary", className: "bg-black text-white px-4 py-2 rounded-lg font-bold hover:translate-y-px hover:shadow-none transition-all flex items-center gap-2 border-2 border-black shadow-[4px_4px_0px_0px_rgba(0,0,0,0.2)] h-auto", onClick: () => setIsCartOpen(true), "aria-label": `View cart with ${cart.length} items`, children: [_jsx(ShoppingCart, { className: "w-5 h-5" }), _jsxs("span", { children: ["Cart (", cart.length, ")"] })] })] }) }), isCartOpen && (_jsxs("div", { className: "fixed inset-0 z-50 flex justify-end", children: [_jsx("div", { className: "absolute inset-0 bg-black/10 backdrop-blur-sm", onClick: () => setIsCartOpen(false) }), _jsxs("div", { className: "relative w-full max-w-md bg-white h-full shadow-2xl flex flex-col border-l-4 border-black animate-in slide-in-from-right", children: [_jsxs("div", { className: "p-6 border-b-2 border-dashed border-gray-200 flex justify-between items-center bg-gray-50", children: [_jsx("h2", { className: "font-bold text-xl", children: "Your Downloads" }), _jsx(Button, { variant: "ghost", size: "icon", onClick: () => setIsCartOpen(false), "aria-label": "Close cart sidebar", children: _jsx(X, { className: "w-6 h-6 hover:rotate-90 transition-transform" }) })] }), _jsx("div", { className: "flex-1 overflow-auto p-6 space-y-6", children: cart.length === 0 ? (_jsxs("div", { className: "text-center py-20 opacity-50 border-2 border-dashed border-gray-200 rounded-xl", children: [_jsx(Download, { className: "w-12 h-12 mx-auto mb-2 text-gray-300" }), _jsx("p", { children: "Cart is empty." })] })) : (cart.map((item) => (_jsxs("div", { className: "bg-white border-2 border-black rounded-xl p-4 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)]", children: [_jsxs("div", { className: "flex justify-between items-start mb-2", children: [_jsx("h3", { className: "font-bold text-lg leading-tight", children: item.name }), _jsxs("div", { className: "bg-[#FF90E8] px-2 py-1 border border-black text-xs font-bold rounded", children: ["\u20A6", item.price.toLocaleString()] })] }), _jsx("div", { className: "flex justify-between items-center mt-4", children: _jsx(Button, { variant: "link", onClick: () => removeFromCart(item.id), className: "text-xs font-bold text-red-500 hover:bg-red-50 px-2 py-1 rounded h-auto p-0", "aria-label": `Remove ${item.name} from downloads`, children: "Remove" }) })] }, item.id)))) }), cart.length > 0 && (_jsxs("div", { className: "p-6 border-t-2 border-black bg-gray-50", children: [_jsxs("div", { className: "flex justify-between text-xl font-bold mb-4", children: [_jsx("span", { children: "Total" }), _jsxs("span", { children: ["\u20A6", total.toLocaleString()] })] }), _jsxs(Button, { onClick: () => {
                                            setIsCartOpen(false);
                                            setIsCheckoutOpen(true);
                                        }, className: "w-full bg-[#23A094] text-white py-6 font-bold rounded-xl border-2 border-black shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:translate-y-[2px] hover:shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] transition-all h-auto", children: ["Pay ", total > 0 ? `â‚¦${total.toLocaleString()}` : ""] }), _jsxs("div", { className: "text-center mt-3 text-xs text-gray-500 flex items-center justify-center gap-1", children: [_jsx(ShieldCheck, { className: "w-3 h-3" }), " Secure checkout"] })] }))] })] })), _jsxs("div", { className: "max-w-5xl mx-auto px-6 py-16", children: [_jsx("div", { className: "w-20 h-2 bg-[#FF90E8] mb-8 border-2 border-black shadow-[4px_4px_0px_0px_rgba(0,0,0,1)]" }), _jsxs("h1", { className: "text-5xl font-black mb-6 leading-none", children: ["High-quality digital assets ", _jsx("br", {}), "for creators."] }), _jsx("p", { className: "text-xl text-gray-500 mb-16 max-w-2xl", children: "Premium fonts, prototypes, templates, and textures. Carefully curated for professional designers. Instant download." }), isLoading && products.length === 0 ? (_jsx("div", { className: "py-20 text-center text-gray-500 font-bold", children: "Loading assets..." })) : products.length === 0 ? (_jsx("div", { className: "py-20 text-center border-2 border-dashed border-gray-300 rounded-2xl", children: _jsx("p", { className: "text-gray-400 font-bold text-xl", children: "No products found." }) })) : (_jsx("div", { className: "grid md:grid-cols-3 gap-8", children: products.map((product) => (_jsx("div", { className: "group cursor-pointer", children: _jsxs("div", { className: "bg-white border-2 border-black rounded-2xl overflow-hidden shadow-[8px_8px_0px_0px_rgba(0,0,0,1)] hover:shadow-[12px_12px_0px_0px_rgba(0,0,0,1)] hover:-translate-y-1 transition-all duration-200", children: [_jsxs("div", { className: "aspect-[4/3] bg-gray-100 border-b-2 border-black relative", children: [_jsx("img", { src: product.image ||
                                                    `https://via.placeholder.com/400x300?text=${encodeURIComponent(product.name)}`, alt: product.name, className: "w-full h-full object-cover" }), _jsx("div", { className: "absolute top-3 left-3 bg-white px-3 py-1 text-xs font-black uppercase tracking-widest border-2 border-black rounded-lg", children: product.category || "Asset" })] }), _jsxs("div", { className: "p-6", children: [_jsx("h3", { className: "text-xl font-bold mb-2 leading-tight", children: product.name }), _jsx("p", { className: "text-gray-500 text-sm mb-6 line-clamp-2 h-10", children: product.description }), _jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { className: "text-2xl font-black", children: ["\u20A6", product.price.toLocaleString()] }), _jsx(Button, { variant: "primary", onClick: () => addToCart(product), className: "bg-[#FF90E8] text-black px-6 py-2 rounded-lg font-bold border-2 border-black hover:bg-[#ff70e0] transition-colors h-auto", "aria-label": `Add ${product.name} to cart`, children: "I want this!" })] })] })] }) }, product.id))) }))] }), _jsx("footer", { className: "border-t border-gray-100 mt-20 py-12 text-center text-gray-400 font-bold text-sm", children: "Powered by Vayva Digital." })] }));
}
