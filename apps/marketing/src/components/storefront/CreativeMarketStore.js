import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useState } from "react";
import { useStorefrontProducts, useStorefrontStore, } from "@/hooks/storefront/useStorefront";
import { useStorefrontCart } from "@/hooks/storefront/useStorefrontCart";
import { CheckoutModal } from "./CheckoutModal";
import { ShoppingCart, X, Heart } from "lucide-react";
import { Button } from "@vayva/ui";
export function CreativeMarketStore({ storeName: initialStoreName, storeSlug, }) {
    const { store } = useStorefrontStore(storeSlug);
    const { products, isLoading } = useStorefrontProducts(storeSlug, {
        limit: 12,
    });
    const { cart, addToCart, removeFromCart, updateQuantity, total, isOpen: isCartOpen, setIsOpen: setIsCartOpen, clearCart, } = useStorefrontCart(storeSlug || "");
    const [isCheckoutOpen, setIsCheckoutOpen] = useState(false);
    const displayName = store?.name || initialStoreName;
    return (_jsxs("div", { className: "bg-[#fcfcfc] min-h-screen font-sans text-[#333]", children: [_jsx(CheckoutModal, { isOpen: isCheckoutOpen, onClose: () => setIsCheckoutOpen(false), cart: cart, total: total, storeSlug: storeSlug || "", onSuccess: clearCart }), _jsx("nav", { className: "bg-white border-b border-gray-200 sticky top-0 z-50", children: _jsxs("div", { className: "max-w-[1400px] mx-auto px-6 h-16 flex items-center justify-between", children: [_jsx("div", { className: "font-serif text-2xl font-bold italic tracking-tight", children: displayName }), _jsxs("div", { className: "hidden md:flex gap-6 text-sm font-medium text-gray-500", children: [_jsx("a", { href: "#", className: "hover:text-black", children: "Graphics" }), _jsx("a", { href: "#", className: "hover:text-black", children: "Fonts" }), _jsx("a", { href: "#", className: "hover:text-black", children: "Templates" }), _jsx("a", { href: "#", className: "hover:text-black", children: "Add-ons" })] }), _jsxs("div", { className: "flex items-center gap-4", children: [_jsx(Button, { variant: "ghost", className: "text-gray-500 hover:text-red-500 p-0 h-auto hover:bg-transparent", "aria-label": "Add to favorites", children: _jsx(Heart, { className: "w-5 h-5" }) }), _jsxs(Button, { variant: "ghost", size: "icon", onClick: () => setIsCartOpen(true), className: "bg-gray-100 p-2 rounded-full hover:bg-gray-200 relative text-gray-700 h-10 w-10 flex items-center justify-center", "aria-label": `View cart with ${cart.length} items`, children: [_jsx(ShoppingCart, { className: "w-5 h-5" }), cart.length > 0 && (_jsx("span", { className: "absolute -top-1 -right-1 bg-red-500 text-white text-[10px] w-4 h-4 rounded-full flex items-center justify-center font-bold", children: cart.length }))] }), _jsx(Button, { variant: "primary", className: "bg-green-500 text-white px-4 py-2 rounded text-sm font-bold hover:bg-green-600 transition-colors h-auto border-none", children: "Sign In" })] })] }) }), isCartOpen && (_jsxs("div", { className: "fixed inset-0 z-50 flex justify-end", children: [_jsx("div", { className: "absolute inset-0 bg-black/20 backdrop-blur-sm", onClick: () => setIsCartOpen(false) }), _jsxs("div", { className: "relative w-full max-w-md bg-white h-full shadow-2xl flex flex-col animate-in slide-in-from-right", children: [_jsxs("div", { className: "p-5 border-b border-gray-100 flex justify-between items-center", children: [_jsx("h2", { className: "font-bold text-lg text-gray-800", children: "Shopping Cart" }), _jsx(Button, { variant: "ghost", size: "icon", onClick: () => setIsCartOpen(false), "aria-label": "Close cart sidebar", children: _jsx(X, { className: "w-5 h-5 text-gray-400" }) })] }), _jsx("div", { className: "flex-1 overflow-auto p-5 space-y-5", children: cart.length === 0 ? (_jsxs("div", { className: "text-center py-10 opacity-60", children: [_jsx(ShoppingCart, { className: "w-12 h-12 mx-auto mb-2 text-gray-300" }), _jsx("p", { className: "text-gray-500", children: "Your cart is empty." })] })) : (cart.map((item) => (_jsxs("div", { className: "flex gap-4 border-b border-gray-100 pb-4", children: [_jsx("div", { className: "w-20 h-20 bg-gray-100 rounded-md overflow-hidden flex-shrink-0", children: item.image && (_jsx("img", { src: item.image, alt: item.name, className: "w-full h-full object-cover" })) }), _jsxs("div", { className: "flex-1", children: [_jsx("h3", { className: "font-bold text-sm text-gray-800 line-clamp-2 mb-1", children: item.name }), _jsx("div", { className: "text-xs text-gray-400 mb-2", children: "Commercial License" }), _jsxs("div", { className: "flex justify-between items-baseline", children: [_jsxs("span", { className: "font-bold text-green-600", children: ["\u20A6", item.price.toLocaleString()] }), _jsx(Button, { variant: "link", onClick: () => removeFromCart(item.id), className: "text-xs text-red-500 hover:underline p-0 h-auto", children: "Remove" })] })] })] }, item.id)))) }), cart.length > 0 && (_jsxs("div", { className: "p-5 border-t border-gray-100 bg-gray-50", children: [_jsxs("div", { className: "flex justify-between items-center mb-4 text-sm font-medium text-gray-600", children: [_jsx("span", { children: "Subtotal" }), _jsxs("span", { className: "text-lg font-bold text-gray-900", children: ["\u20A6", total.toLocaleString()] })] }), _jsx(Button, { onClick: () => {
                                            setIsCartOpen(false);
                                            setIsCheckoutOpen(true);
                                        }, className: "w-full bg-green-500 text-white py-6 h-auto rounded-md font-bold hover:bg-green-600 shadow-md transition-colors", children: "Proceed to Checkout" })] }))] })] })), _jsxs("div", { className: "bg-[#f0f5f3] py-20 border-b border-gray-200 text-center px-6", children: [_jsx("h1", { className: "text-3xl md:text-5xl font-serif font-bold text-gray-900 mb-6", children: "World-class design assets" }), _jsx("p", { className: "text-lg text-gray-600 max-w-2xl mx-auto mb-8", children: "Bring your creative projects to life with ready-to-use design assets from independent creators around the world." }), _jsxs("div", { className: "max-w-2xl mx-auto bg-white p-2 rounded-lg shadow-sm flex items-center border border-gray-200", children: [_jsx("input", { type: "text", placeholder: "Search fonts, graphics, and more...", className: "flex-1 px-4 py-2 outline-none text-gray-700" }), _jsx(Button, { className: "bg-red-500 text-white px-6 py-2 rounded-md font-bold hover:bg-red-600 h-auto border-none", children: "Search" })] })] }), _jsxs("div", { className: "max-w-[1400px] mx-auto px-6 py-12", children: [_jsxs("div", { className: "flex items-center justify-between mb-8", children: [_jsx("h2", { className: "text-xl font-bold text-gray-900", children: "Trending Now" }), _jsx("a", { href: "#", className: "text-sm font-bold text-green-600 hover:underline", children: "View All" })] }), isLoading && products.length === 0 ? (_jsx("div", { className: "text-center py-20 text-gray-400", children: "Loading assets..." })) : products.length === 0 ? (_jsx("div", { className: "text-center py-20 border border-gray-200 rounded-lg", children: _jsx("p", { className: "text-gray-400", children: "No assets found." }) })) : (_jsx("div", { className: "grid md:grid-cols-4 gap-6", children: products.map((product) => (_jsxs("div", { className: "group bg-white rounded-lg border border-gray-100 shadow-sm hover:shadow-lg transition-all overflow-hidden cursor-pointer", onClick: () => addToCart(product), children: [_jsxs("div", { className: "aspect-[4/3] bg-gray-100 relative", children: [_jsx("img", { src: product.image ||
                                                `https://via.placeholder.com/400x300?text=${encodeURIComponent(product.name)}`, alt: product.name, className: "w-full h-full object-cover" }), _jsx("div", { className: "absolute top-2 right-2 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity", children: _jsx(Button, { variant: "ghost", size: "icon", className: "bg-white p-2 rounded-md text-gray-600 hover:text-red-500 shadow-sm w-8 h-8 flex items-center justify-center p-0", "aria-label": "Add to favorites", children: _jsx(Heart, { className: "w-4 h-4" }) }) })] }), _jsxs("div", { className: "p-4", children: [_jsx("h3", { className: "font-bold text-gray-800 text-sm mb-1 line-clamp-1", children: product.name }), _jsxs("p", { className: "text-xs text-gray-500 mb-4", children: ["by ", _jsx("span", { className: "underline", children: "Vayva Creators" }), " in", " ", product.category || "Graphics"] }), _jsxs("div", { className: "flex items-center justify-between pt-3 border-t border-gray-50", children: [_jsxs("div", { className: "font-bold text-lg text-gray-900", children: ["\u20A6", product.price.toLocaleString()] }), _jsxs(Button, { variant: "primary", className: "bg-gray-100 hover:bg-green-500 hover:text-white px-3 py-2 text-xs font-bold transition-colors flex items-center gap-1 h-auto text-gray-700", onClick: (e) => {
                                                        e.stopPropagation();
                                                        addToCart(product);
                                                    }, "aria-label": `Add ${product.name} to cart`, children: [_jsx(ShoppingCart, { className: "w-3 h-3" }), " Add"] })] })] })] }, product.id))) }))] }), _jsxs("footer", { className: "bg-white border-t border-gray-200 mt-20 py-12 text-center text-gray-400 text-sm", children: ["\u00A9 2024 ", displayName, " Market."] })] }));
}
