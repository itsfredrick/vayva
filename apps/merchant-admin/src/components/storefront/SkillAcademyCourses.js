import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useState } from "react";
import { Button } from "@vayva/ui";
import { useStorefrontProducts, useStorefrontStore, } from "@/hooks/storefront/useStorefront";
import { useStorefrontCart } from "@/hooks/storefront/useStorefrontCart";
import { CheckoutModal } from "./CheckoutModal";
import { ShoppingCart, X, Star, BookOpen } from "lucide-react";
export function SkillAcademyCourses({ storeName: initialStoreName, storeSlug, }) {
    const { store } = useStorefrontStore(storeSlug);
    const { products, isLoading } = useStorefrontProducts(storeSlug, {
        limit: 12,
    });
    const { cart, addToCart, removeFromCart, updateQuantity, total, isOpen: isCartOpen, setIsOpen: setIsCartOpen, clearCart, } = useStorefrontCart(storeSlug || "");
    const [isCheckoutOpen, setIsCheckoutOpen] = useState(false);
    const displayName = store?.name || initialStoreName;
    return (_jsxs("div", { className: "bg-gray-50 min-h-screen font-sans text-gray-800", children: [_jsx(CheckoutModal, { isOpen: isCheckoutOpen, onClose: () => setIsCheckoutOpen(false), cart: cart, total: total, storeSlug: storeSlug || "", onSuccess: clearCart }), _jsx("nav", { className: "bg-white border-b border-gray-200 shadow-sm sticky top-0 z-50", children: _jsxs("div", { className: "max-w-7xl mx-auto px-6 h-16 flex items-center justify-between", children: [_jsxs("div", { className: "flex items-center gap-8", children: [_jsxs("div", { className: "font-bold text-2xl text-purple-600 flex items-center gap-2", children: [_jsx(BookOpen, { className: "w-6 h-6" }), displayName] }), _jsxs("div", { className: "hidden md:flex gap-6 text-sm font-medium text-gray-600", children: [_jsx("a", { href: "#", className: "hover:text-purple-600", children: "Categories" }), _jsx("a", { href: "#", className: "hover:text-purple-600", children: "Mentors" }), _jsx("a", { href: "#", className: "hover:text-purple-600", children: "Business" })] })] }), _jsxs("div", { className: "flex items-center gap-4", children: [_jsx(Button, { className: "text-sm font-medium text-gray-600 hover:text-purple-600", children: "Log in" }), _jsx(Button, { className: "bg-black text-white px-4 py-2 text-sm font-bold rounded hover:bg-gray-800", children: "Sign up" }), _jsxs(Button, { className: "relative p-2 hover:bg-gray-100 rounded-full text-gray-600", onClick: () => setIsCartOpen(true), children: [_jsx(ShoppingCart, { className: "w-6 h-6" }), cart.length > 0 && (_jsx("span", { className: "absolute -top-1 -right-1 bg-purple-600 text-white text-[10px] w-4 h-4 rounded-full flex items-center justify-center font-bold", children: cart.length }))] })] })] }) }), isCartOpen && (_jsxs("div", { className: "fixed inset-0 z-50 flex justify-end", children: [_jsx("div", { className: "absolute inset-0 bg-black/50 backdrop-blur-sm", onClick: () => setIsCartOpen(false) }), _jsxs("div", { className: "relative w-full max-w-md bg-white h-full shadow-2xl flex flex-col animate-in slide-in-from-right", children: [_jsxs("div", { className: "p-4 border-b border-gray-200 flex justify-between items-center bg-gray-50", children: [_jsx("h2", { className: "font-bold text-lg", children: "Shopping Cart" }), _jsx(Button, { onClick: () => setIsCartOpen(false), children: _jsx(X, { className: "w-5 h-5 text-gray-500" }) })] }), _jsx("div", { className: "flex-1 overflow-auto p-4 space-y-4", children: cart.length === 0 ? (_jsxs("div", { className: "text-center py-10 opacity-60", children: [_jsx(BookOpen, { className: "w-12 h-12 mx-auto mb-2 text-gray-300" }), "Your cart is empty. Keep learning!"] })) : (cart.map((item) => (_jsxs("div", { className: "flex gap-3 border-b border-gray-100 pb-4", children: [_jsx("div", { className: "w-24 h-16 bg-gray-200 rounded overflow-hidden flex-shrink-0", children: item.image && (_jsx("img", { src: item.image, className: "w-full h-full object-cover" })) }), _jsxs("div", { className: "flex-1 min-w-0", children: [_jsx("h3", { className: "font-bold text-sm line-clamp-2 mb-1", children: item.name }), _jsx("div", { className: "text-xs text-gray-500 mb-2", children: "By Expert Instructor" }), _jsxs("div", { className: "flex justify-between items-center", children: [_jsxs("span", { className: "font-bold text-purple-700", children: ["\u20A6", item.price.toLocaleString()] }), _jsx(Button, { onClick: () => removeFromCart(item.id), className: "text-xs text-red-500 hover:underline", children: "Remove" })] })] })] }, item.id)))) }), cart.length > 0 && (_jsxs("div", { className: "p-4 border-t border-gray-200 bg-gray-50", children: [_jsxs("div", { className: "flex justify-between text-xl font-bold mb-4", children: [_jsx("span", { children: "Total:" }), _jsxs("span", { children: ["\u20A6", total.toLocaleString()] })] }), _jsx(Button, { onClick: () => {
                                            setIsCartOpen(false);
                                            setIsCheckoutOpen(true);
                                        }, className: "w-full bg-purple-600 text-white py-3 font-bold rounded hover:bg-purple-700 shadow-lg", children: "Checkout Now" })] }))] })] })), _jsx("div", { className: "bg-white border-b border-gray-200", children: _jsxs("div", { className: "max-w-7xl mx-auto px-6 py-16 md:py-24 flex items-center justify-between", children: [_jsxs("div", { className: "max-w-2xl", children: [_jsxs("h1", { className: "text-4xl md:text-5xl font-bold mb-6 text-gray-900 leading-tight", children: ["Unlock your potential with", " ", _jsx("span", { className: "text-purple-600", children: "new skills" })] }), _jsx("p", { className: "text-lg text-gray-600 mb-8 max-w-lg", children: "Join thousands of learners worldwide. Master design, coding, marketing and more from industry leaders." }), _jsx("div", { className: "flex gap-4", children: _jsx(Button, { className: "bg-black text-white px-8 py-3 font-bold rounded hover:bg-gray-800", children: "View All Courses" }) })] }), _jsxs("div", { className: "hidden md:block relative w-96 h-80", children: [_jsx("div", { className: "absolute inset-0 bg-purple-100 rounded-2xl transform rotate-6" }), _jsx("div", { className: "absolute inset-0 bg-white border border-gray-200 rounded-2xl shadow-xl flex items-center justify-center p-8", children: _jsxs("div", { className: "grid grid-cols-2 gap-4 w-full h-full", children: [_jsx("div", { className: "bg-purple-600 rounded-lg opacity-10 col-span-2 h-32" }), _jsx("div", { className: "bg-orange-400 rounded-lg opacity-20 h-24" }), _jsx("div", { className: "bg-blue-400 rounded-lg opacity-20 h-24" })] }) })] })] }) }), _jsx("div", { className: "bg-gray-50 py-8 border-b border-gray-200", children: _jsxs("div", { className: "max-w-7xl mx-auto px-6 text-center", children: [_jsx("p", { className: "text-xs font-bold text-gray-400 uppercase tracking-widest mb-4", children: "Trusted by teams at" }), _jsxs("div", { className: "flex justify-center gap-12 opacity-40 grayscale font-bold text-xl", children: [_jsx("span", { children: "GOOGLE" }), _jsx("span", { children: "NETFLIX" }), _jsx("span", { children: "SPOTIFY" }), _jsx("span", { children: "AMAZON" })] })] }) }), _jsxs("div", { className: "max-w-7xl mx-auto px-6 py-16", children: [_jsx("h2", { className: "text-2xl font-bold mb-8 text-gray-900", children: "Featured Courses" }), isLoading && products.length === 0 ? (_jsx("div", { className: "text-center py-20 text-gray-500", children: "Loading courses..." })) : products.length === 0 ? (_jsx("div", { className: "text-center py-20 border-2 border-dashed border-gray-200 rounded-xl", children: _jsx("p", { className: "text-gray-400", children: "No active courses." }) })) : (_jsx("div", { className: "grid md:grid-cols-4 gap-6", children: products.map((course) => (_jsxs("div", { className: "bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-lg transition-shadow group flex flex-col h-full cursor-pointer", onClick: () => addToCart(course), children: [_jsxs("div", { className: "aspect-video bg-gray-100 relative", children: [_jsx("img", { src: course.image ||
                                                `https://via.placeholder.com/300x200?text=${encodeURIComponent(course.name)}`, className: "w-full h-full object-cover" }), _jsx("div", { className: "absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors" })] }), _jsxs("div", { className: "p-4 flex flex-col flex-1", children: [_jsx("h3", { className: "font-bold text-gray-900 mb-1 line-clamp-2 h-[48px]", children: course.name }), _jsx("p", { className: "text-xs text-gray-500 mb-2 truncate", children: "Dr. Angela Yu, Developer Bootcamp" }), _jsxs("div", { className: "flex items-center gap-1 text-xs font-bold text-orange-500 mb-2", children: [_jsxs("span", { className: "flex items-center", children: ["4.8 ", _jsx(Star, { className: "w-3 h-3 fill-current ml-1" })] }), _jsx("span", { className: "text-gray-400 font-normal", children: "(1,204)" })] }), _jsxs("div", { className: "mt-auto pt-4 border-t border-gray-50 flex items-center justify-between", children: [_jsxs("span", { className: "font-bold text-lg text-gray-900", children: ["\u20A6", course.price.toLocaleString()] }), _jsx(Button, { className: "bg-purple-100 text-purple-700 px-3 py-1 text-xs font-bold rounded hover:bg-purple-200", children: "Add to Cart" })] })] })] }, course.id))) }))] }), _jsx("footer", { className: "bg-white border-t border-gray-200 mt-20 py-12", children: _jsxs("div", { className: "max-w-7xl mx-auto px-6 grid md:grid-cols-4 gap-8 text-sm text-gray-500", children: [_jsxs("div", { children: [_jsx("div", { className: "font-bold text-gray-900 mb-4 text-lg", children: displayName }), _jsx("p", { children: "Empowering learners worldwide." })] }), _jsxs("div", { children: [_jsx("h4", { className: "font-bold text-gray-900 mb-4", children: "Teach" }), _jsxs("ul", { className: "space-y-2", children: [_jsx("li", { children: "Become an instructor" }), _jsx("li", { children: "Teacher Rules" }), _jsx("li", { children: "Teaching Academy" })] })] })] }) })] }));
}
