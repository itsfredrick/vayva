"use client";
import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useState } from "react";
import { format } from "date-fns";
import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from "@/components/ui/table";
import { Dialog, DialogContent, DialogHeader, DialogTitle } from "@/components/ui/dialog";
import { Button, Badge } from "@vayva/ui";
import { Eye } from "lucide-react";
export function ActivityLogTable({ logs }) {
    const [selectedLog, setSelectedLog] = useState(null);
    return (_jsxs("div", { className: "bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden", children: [_jsxs(Table, { children: [_jsx(TableHeader, { className: "bg-gray-50", children: _jsxs(TableRow, { children: [_jsx(TableHead, { children: "Date" }), _jsx(TableHead, { children: "User" }), _jsx(TableHead, { children: "Action" }), _jsx(TableHead, { children: "Target" }), _jsx(TableHead, { className: "text-right", children: "Details" })] }) }), _jsxs(TableBody, { children: [logs.map((log) => (_jsxs(TableRow, { className: "hover:bg-gray-50/50", children: [_jsx(TableCell, { className: "text-gray-500 whitespace-nowrap", children: format(new Date(log.createdAt), "MMM d, h:mm a") }), _jsxs(TableCell, { className: "font-medium text-gray-900", children: [log.actorUserId.slice(0, 8), "..."] }), _jsx(TableCell, { children: _jsx(Badge, { className: "font-medium bg-blue-50 text-blue-700 border-blue-100", children: log.action }) }), _jsxs(TableCell, { className: "text-gray-600 max-w-[200px] truncate", children: [_jsx("span", { className: "text-xs uppercase font-bold text-gray-400 mr-2", children: log.targetType }), log.targetId.slice(0, 8), "..."] }), _jsx(TableCell, { className: "text-right", children: _jsx(Button, { variant: "ghost", size: "sm", onClick: () => setSelectedLog(log), className: "h-8 w-8 rounded-full p-0 text-gray-500 hover:text-gray-900", children: _jsx(Eye, { className: "w-4 h-4" }) }) })] }, log.id))), logs.length === 0 && (_jsx(TableRow, { children: _jsx(TableCell, { colSpan: 5, className: "h-24 text-center text-gray-500", children: "No activity logs found." }) }))] })] }), _jsx(Dialog, { open: !!selectedLog, onOpenChange: (open) => !open && setSelectedLog(null), children: _jsxs(DialogContent, { className: "max-w-2xl", children: [_jsx(DialogHeader, { children: _jsx(DialogTitle, { children: "Activity Details" }) }), selectedLog && (_jsxs("div", { className: "space-y-4", children: [_jsxs("div", { className: "grid grid-cols-2 gap-4 text-sm", children: [_jsxs("div", { children: [_jsx("span", { className: "text-gray-500 block text-xs uppercase font-bold", children: "Action" }), _jsx("span", { className: "font-medium", children: selectedLog.action })] }), _jsxs("div", { children: [_jsx("span", { className: "text-gray-500 block text-xs uppercase font-bold", children: "Date" }), _jsx("span", { className: "font-medium", children: format(new Date(selectedLog.createdAt), "PPpp") })] })] }), _jsxs("div", { className: "border rounded-lg overflow-hidden", children: [_jsxs("div", { className: "grid grid-cols-2 bg-gray-50 border-b text-xs font-bold uppercase tracking-wider p-2", children: [_jsx("div", { className: "text-red-700", children: "Before" }), _jsx("div", { className: "text-green-700", children: "After" })] }), _jsxs("div", { className: "grid grid-cols-2 divide-x h-[300px] overflow-y-auto font-mono text-sm", children: [_jsx("div", { className: "p-4 bg-red-50/10", children: _jsx("pre", { className: "whitespace-pre-wrap", children: JSON.stringify(selectedLog.before || {}, null, 2) }) }), _jsx("div", { className: "p-4 bg-green-50/10", children: _jsx("pre", { className: "whitespace-pre-wrap", children: JSON.stringify(selectedLog.after || {}, null, 2) }) })] })] })] }))] }) })] }));
}
