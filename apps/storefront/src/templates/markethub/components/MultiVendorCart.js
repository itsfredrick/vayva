import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { X, ShoppingBag, Package } from "lucide-react";
import { Button } from "@vayva/ui";
export const MultiVendorCart = ({ isOpen, onClose, items, onRemove, onCheckout, }) => {
    if (!isOpen)
        return null;
    // Group items by vendor
    const groupedItems = items.reduce((acc, item) => {
        const vendorId = item.product.vendorDetails?.id || "unknown";
        if (!acc[vendorId]) {
            acc[vendorId] = {
                details: item.product.vendorDetails,
                items: [],
            };
        }
        acc[vendorId].items.push(item);
        return acc;
    }, {});
    const subTotal = items.reduce((sum, item) => sum + item.product.price * item.qty, 0);
    return (_jsx("div", { className: "fixed inset-0 z-[100] flex justify-end bg-black/50 backdrop-blur-sm", children: _jsxs("div", { className: "w-full max-w-md bg-white h-full shadow-2xl flex flex-col animate-in slide-in-from-right duration-300", children: [_jsxs("div", { className: "p-5 border-b border-gray-100 flex items-center justify-between bg-white", children: [_jsxs("div", { className: "flex items-center gap-2", children: [_jsx(ShoppingBag, { size: 20, className: "text-[#10B981]" }), _jsxs("h2", { className: "font-bold text-lg text-gray-900", children: ["Your Cart (", items.length, ")"] })] }), _jsx(Button, { variant: "ghost", size: "icon", onClick: onClose, className: "p-2 hover:bg-gray-100 rounded-full transition-colors text-gray-500 h-auto", "aria-label": "Close cart", children: _jsx(X, { size: 20 }) })] }), _jsx("div", { className: "flex-1 overflow-y-auto p-5 space-y-6 bg-gray-50", children: items.length === 0 ? (_jsxs("div", { className: "text-center py-12 text-gray-400", children: [_jsx(ShoppingBag, { size: 48, className: "mx-auto mb-4 opacity-20" }), _jsx("p", { children: "Your cart is empty." }), _jsx(Button, { variant: "link", onClick: onClose, className: "mt-4 text-[#10B981] font-bold hover:underline h-auto p-0", "aria-label": "Start shopping", children: "Start Shopping" })] })) : (Object.entries(groupedItems).map(([vendorId, group]) => (_jsxs("div", { className: "bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden", children: [_jsxs("div", { className: "bg-gray-50 p-3 border-b border-gray-100 flex items-center justify-between text-xs", children: [_jsxs("div", { className: "flex items-center gap-2 font-bold text-gray-700", children: [_jsx(Package, { size: 14 }), _jsxs("span", { children: ["Sold by ", group.details?.name || "Unknown Vendor"] })] }), _jsxs("span", { className: "text-gray-400", children: ["Package ", Object.keys(groupedItems).indexOf(vendorId) + 1, " of", " ", Object.keys(groupedItems).length] })] }), _jsx("div", { className: "divide-y divide-gray-50", children: group.items.map(({ product, qty }) => (_jsxs("div", { className: "p-3 flex gap-3", children: [_jsx("div", { className: "w-16 h-16 bg-gray-100 rounded-md overflow-hidden shrink-0", children: _jsx("img", { src: product.images?.[0], alt: product.name, className: "w-full h-full object-cover" }) }), _jsxs("div", { className: "flex-1 min-w-0", children: [_jsx("h4", { className: "font-bold text-gray-900 text-sm truncate", children: product.name }), _jsx("p", { className: "text-xs text-gray-500 mb-2", children: group.details?.name }), _jsxs("div", { className: "flex justify-between items-center", children: [_jsxs("span", { className: "text-sm font-bold", children: ["\u20A6", product.price.toLocaleString()] }), _jsxs("div", { className: "flex items-center gap-3", children: [_jsxs("span", { className: "text-xs text-gray-500", children: ["Qty: ", qty] }), _jsx(Button, { variant: "link", onClick: () => onRemove(product.id), className: "text-xs text-red-500 hover:underline h-auto p-0 font-normal", "aria-label": `Remove ${product.name} from cart`, children: "Remove" })] })] })] })] }, product.id))) })] }, vendorId)))) }), items.length > 0 && (_jsxs("div", { className: "p-5 border-t border-gray-100 bg-white", children: [_jsxs("div", { className: "flex justify-between items-center mb-4", children: [_jsxs("span", { className: "text-gray-500 text-sm", children: ["Total (", Object.keys(groupedItems).length, " Packages)"] }), _jsxs("span", { className: "font-black text-xl text-[#111827]", children: ["\u20A6", subTotal.toLocaleString()] })] }), _jsx(Button, { onClick: onCheckout, className: "w-full bg-[#111827] hover:bg-[#1F2937] text-white font-bold py-3.5 rounded-xl transition-colors shadow-lg shadow-gray-200 h-auto", "aria-label": "Proceed to checkout", children: "Checkout Now" })] }))] }) }));
};
